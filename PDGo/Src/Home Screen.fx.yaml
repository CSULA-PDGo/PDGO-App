"'Home Screen' As screen":
    OnVisible: |-
        =Set(IsSidebarOpen, false);
        Set(var1,GetMods.Run());
        
        Set(UserData, LookUp(Users, 'Email Address' = User().Email));
        
        UpdateContext({items:var1});
        ClearCollect(Columns,{var:"aa", Bool: false, int:1 });
        ClearCollect(af1,{ uID:"1", id:false, title:false,Fname:false,PhoneN:false,EA:false,AM:false, Tid:false, Sup:false,UType:false,Author:false});
        ClearCollect(af2, { FullN:"aa", varName:"aa"});
        
        Clear(af2);
        Clear(af1);
        
        ForAll(Filter(Split(" {" & items.jsonstrings, "{"), Boolean( ParseJSON("{"" "": true }").bool ) in Value) As af,
        
         If("true" in af.Value ,
         
          Patch(af1, Defaults(af1), 
        
         {uID: Value(ParseJSON("{" & af.Value).UserID), id:Boolean(ParseJSON("{" & af.Value).ID), title:Boolean(ParseJSON("{" & af.Value).Title),Fname:Boolean(ParseJSON("{" & af.Value).'Full Name'),PhoneN:Boolean(ParseJSON("{" & af.Value).'Phone Number'),EA:Boolean(ParseJSON("{" & af.Value).'Email Address'), AM:Boolean(ParseJSON("{" & af.Value).'About Me'), Tid:Boolean(ParseJSON("{" & af.Value).'Team ID'), Sup:Boolean(ParseJSON("{" & af.Value).Supervisor),UType:Boolean(ParseJSON("{" & af.Value).'User Type'),Author:Boolean(ParseJSON("{" & af.Value).Author)} ) ));
        
         ForAll(af1,
         If( id = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "id"}));  
         If( title = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "title"})); 
         If( Fname = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "Full Name"})); 
        If( PhoneN = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "Phone Number"})); 
        If( EA = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "Email Address"}));     
        If( AM = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "About Me"})); 
        If( Tid = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "Tid"}));
        If( Sup = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "Supervisor"}));  
        If( UType = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "User Type"}));  
        If( Author = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "Author"}));         );

    "'Home Screen Updates' As groupContainer.manualLayoutContainer":
        BorderThickness: =2.5
        ContentLanguage: =
        Height: =2*Parent.Height / 3
        Width: =Parent.Width
        Y: =Parent.Height / 3
        ZIndex: =1

        "'Home Screen Updates Gallery' As gallery.'BrowseLayout_Flexible_NewsFeed_ver5.0'":
            DelayItemLoading: =true
            Fill: =RGBA(241, 244, 249, 1)
            FocusedBorderThickness: =0
            Height: =Parent.Height - 'Home Screen Updates Seperator'.Height
            Items: =af2
            Layout: =Layout.Vertical
            LoadingSpinner: =LoadingSpinner.Data
            TemplatePadding: =0
            TemplateSize: =Min(220, Self.Height - 60)
            Width: =Parent.Width
            Y: ='Home Screen Updates Seperator'.Height
            ZIndex: =1

            "'Home Screen Updates Gallery Text' As label":
                FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                Height: =148
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =23
                Text: =ThisItem.FullN & " has Updated their " & ThisItem.varName
                VerticalAlign: =VerticalAlign.Top
                Width: =464
                X: =172
                Y: =38
                ZIndex: =2

            "'Home Screen Updates Gallery Image' As image":
                Height: =160
                Image: =LookUp(Users, 'Full Name' =  ThisItem.FullN, 'Profile Picture')
                OnSelect: =Select(Parent)
                RadiusBottomLeft: =8
                RadiusBottomRight: =8
                RadiusTopLeft: =8
                RadiusTopRight: =8
                Width: =160
                Y: =32
                ZIndex: =3

            "'Home Screen Updates Gallery Seperator' As rectangle":
                Fill: =RGBA(219, 219, 219, 1)
                Height: =5
                OnSelect: =Select(Parent)
                Width: =Parent.TemplateWidth
                Y: =215
                ZIndex: =4

        "'Home Screen Updates Seperator' As rectangle":
            BorderColor: =RGBA(149, 149, 149, 1)
            Fill: =RGBA(219, 219, 219, 1)
            Height: =5
            OnSelect: =
            Width: =Parent.Height
            ZIndex: =4

    "'Home Screen Banner' As groupContainer.manualLayoutContainer":
        Height: =Parent.Height / 3
        Width: =Parent.Width
        ZIndex: =2

        "'Home Screen Banner Logo' As image":
            Height: =Parent.Height
            Image: =PDGoLogo
            ImagePosition: =ImagePosition.Fill
            Width: =Parent.Width
            ZIndex: =1

        "'Home Screen Banner Profile' As icon.Person":
            Color: =RGBA(255, 255, 255, 1)
            Icon: =Icon.Person
            OnSelect: |+
                =Navigate(Profile, ScreenTransition.CoverRight, {Profile: UserRecord});
                
                
            X: =Parent.Width - Self.Width
            Y: =Parent.Height - Self.Height
            ZIndex: =2

    "'Home Screen SideBar Container' As groupContainer.verticalAutoLayoutContainer":
        Fill: =RGBA(25, 53, 110, 1)
        Height: =Parent.Height
        LayoutDirection: =LayoutDirection.Vertical
        LayoutJustifyContent: =LayoutJustifyContent.Center
        LayoutMode: =LayoutMode.Auto
        Visible: =IsSidebarOpen
        Width: =Max(Min(Parent.Width / 2, 500), 250)
        ZIndex: =3

        "'Home Screen Sidebar Profile' As groupContainer.manualLayoutContainer":
            FillPortions: =0
            Height: =70
            LayoutMinHeight: =112
            LayoutMinWidth: =250
            ZIndex: =9

            "'Home Screen Sidebar Profile Button' As button":
                Align: =Align.Left
                Fill: =RGBA(27, 49, 89, 1)
                Height: =70
                OnSelect: |+
                    =Navigate(Profile, ScreenTransition.CoverRight, {Profile: UserRecord});
                    
                    
                Size: =24
                Text: ="My Profile"
                Width: =Parent.Width - Self.X
                X: =64
                ZIndex: =1

            "'Home Screen Sidebar Profile Icon' As icon.Person":
                Color: =RGBA(255, 255, 255, 1)
                Icon: =Icon.Person
                OnSelect: =Select('Home Screen Sidebar Profile Button')
                Y: =6
                ZIndex: =2

        "'Home Screen Sidebar MCLE' As groupContainer.manualLayoutContainer":
            FillPortions: =0
            Height: =70
            LayoutMinHeight: =70
            LayoutMinWidth: =250
            ZIndex: =10

            "'Home Screen Sidebar MCLE Button' As button":
                Align: =Align.Left
                Fill: =RGBA(27, 49, 89, 1)
                Height: =70
                OnSelect: |+
                    =Navigate(MCLETrainings, ScreenTransition.CoverRight);
                    
                    
                Size: =26
                Text: ="MCLE Training"
                Width: =Parent.Width - Self.X
                X: =64
                ZIndex: =1

            "'Home Screen Sidebar MCLE Icon' As icon.DocumentwithContent":
                Color: =RGBA(255, 255, 255, 1)
                Height: =70
                Icon: =Icon.DocumentWithContent
                OnSelect: =Select('Home Screen Sidebar MCLE Button')
                ZIndex: =2

        "'Home Screen Sidebar Time Off' As groupContainer.manualLayoutContainer":
            FillPortions: =0
            Height: =70
            LayoutMinHeight: =70
            LayoutMinWidth: =250
            ZIndex: =11

            "'Home Screen Sidebar Time Off Button' As button":
                Align: =Align.Left
                Fill: =RGBA(27, 49, 89, 1)
                Height: =70
                OnSelect: |+
                    =Navigate(RequestTimeOff, ScreenTransition.CoverRight);
                    
                    
                Size: =22
                Text: ="Request Time Off"
                Width: =Parent.Width - Self.X
                X: =64
                ZIndex: =1

            "'Home Screen Sidebar Time Off Icon' As icon.DocumentwithContent":
                Color: =RGBA(255, 255, 255, 1)
                Height: =70
                Icon: =Icon.DocumentWithContent
                OnSelect: =Select('Home Screen Sidebar Time Off Button')
                ZIndex: =2

        "'Home Screen Sidebar Facilities' As groupContainer.manualLayoutContainer":
            FillPortions: =0
            Height: =70
            LayoutMinHeight: =70
            LayoutMinWidth: =250
            ZIndex: =12

            "'Home Screen Sidebar Facilities Button' As button":
                Align: =Align.Left
                Fill: =RGBA(27, 49, 89, 1)
                Height: =68
                OnSelect: |+
                    =NewForm('facility-form'); Navigate(FacilityRequest, ScreenTransition.CoverRight)
                    
                    
                Size: =22
                Text: ="Facility Request"
                Width: =Parent.Width - Self.X
                X: =64
                ZIndex: =1

            "'Home Screen Sidebar Facilities Icon' As icon.Notebook":
                Color: =RGBA(255, 255, 255, 1)
                Icon: =Icon.Notebook
                OnSelect: =Select('Home Screen Sidebar Facilities Button')
                Y: =6
                ZIndex: =2

    "'Home Screen Timer' As timer":
        AutoPause: =false
        AutoStart: =true
        DisplayMode: =DisplayMode.View
        Duration: =30000
        Height: =70
        OnTimerEnd: |
            =UpdateContext({items:GetMods.Run()});
            
            Clear(af2);
            Clear(af1);
            
            ForAll(Filter(Split(" {" & items.jsonstrings, "{"), Boolean( ParseJSON("{"" "": true }").bool ) in Value) As af,
            
             If("true" in af.Value ,
             
              Patch(af1, Defaults(af1), 
            
             {uID: Value(ParseJSON("{" & af.Value).UserID), id:Boolean(ParseJSON("{" & af.Value).ID), title:Boolean(ParseJSON("{" & af.Value).Title),Fname:Boolean(ParseJSON("{" & af.Value).'Full Name'),PhoneN:Boolean(ParseJSON("{" & af.Value).'Phone Number'),EA:Boolean(ParseJSON("{" & af.Value).'Email Address'), AM:Boolean(ParseJSON("{" & af.Value).'About Me'), Tid:Boolean(ParseJSON("{" & af.Value).'Team ID'), Sup:Boolean(ParseJSON("{" & af.Value).Supervisor),UType:Boolean(ParseJSON("{" & af.Value).'User Type'),Author:Boolean(ParseJSON("{" & af.Value).Author)} ) ));
            
             ForAll(af1,
             If( id = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "id"}));  
             If( title = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "title"})); 
             If( Fname = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "Full Name"})); 
            If( PhoneN = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "Phone Number"})); 
            If( EA = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "Email Address"}));     
            If( AM = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "About Me"})); 
            If( Tid = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "Tid"}));
            If( Sup = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "Supervisor"}));  
            If( UType = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "User Type"}));  
            If( Author = true, Collect(af2, { FullN: LookUp(Users,  ID = uID, 'Full Name'), varName: "Author"}));         );
        Repeat: =true
        Visible: =false
        Width: =280
        X: =360
        Y: =493
        ZIndex: =4

    "'Home Screen OpenSideBar' As icon.Hamburger":
        Color: =RGBA(255, 255, 255, 1)
        Height: =75
        Icon: =Icon.Hamburger
        OnSelect: =Set(IsSidebarOpen, !IsSidebarOpen)
        Visible: =!IsSidebarOpen
        Width: =100
        ZIndex: =5

    "'Home Screen CloseSideBar' As icon.Cancel":
        Color: =RGBA(255, 255, 255, 1)
        Icon: =Icon.Cancel
        OnSelect: =Set(IsSidebarOpen, !IsSidebarOpen)
        Visible: =IsSidebarOpen
        X: =18
        Y: =11
        ZIndex: =6

