"'Profile - Edit' As screen":

    "'Profile Edit Background' As rectangle":
        Fill: ='Background Color'.Fill
        Width: =App.Width
        ZIndex: =1

    "'Profile Edit Confirm Button' As icon.Check":
        Color: =RGBA(255, 255, 255, 1)
        Height: =35
        Icon: =Icon.Check
        OnSelect: |-
            =If(Len('Profile Edit Phone Number Input'.Text) = 0, 
                
                Patch(Users, LookUp(Users, 'Email Address' = User().Email),{'Full Name': 'Profile Edit Full Name Input'.Text, 'Profile Picture': 'Profile Edit Profile Picture Input'.Image, 'About Me': 'Profile Edit About Me Input'.Text}),
            
                Patch(Users, LookUp(Users, 'Email Address' = User().Email),{'Full Name': 'Profile Edit Full Name Input'.Text, 'Phone Number': 'Profile Edit Phone Number Input'.Text, 'Profile Picture': 'Profile Edit Profile Picture Input'.Image, 'About Me': 'Profile Edit About Me Input'.Text}));
            
            Navigate(Profile, ScreenTransition.Cover)
        Width: =35
        X: =App.Width - 50
        Y: =32
        ZIndex: =3

    "'Profile Edit Label' As label":
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Font: =Font.Lato
        Height: =70
        Size: =27
        Text: ="Edit"
        Width: =App.Width
        Y: =15
        ZIndex: =4

    "'Profile Edit Exit Button' As icon.Cancel":
        Color: =RGBA(255, 255, 255, 1)
        Icon: =Icon.Cancel
        OnSelect: =Navigate(Profile, ScreenTransition.Cover)
        Width: =35
        X: =32
        Y: =18
        ZIndex: =5

    "'Profile Edit Container' As groupContainer.manualLayoutContainer":
        Height: =App.Height
        Width: =App.Width
        ZIndex: =6

        "'Profile Edit Phone Number Input Format' As text":
            Default: |-
                ="(###) ###-####"
            Font: =Font.Lato
            Height: =70
            Size: =21
            Visible: =false
            Width: =560
            X: =40
            Y: =243
            ZIndex: =1

        "'Profile Edit Phone Number Input Slider' As slider":
            Default: =Len('Profile Edit Phone Number Input'.Text)
            Height: =70
            OnChange: |-
                =Set(
                    varPhoneNumber,
                    With(
                        {
                            // extracts all numbers from the phone number field
                            varTextNumbersOnly: Concat(
                                MatchAll(
                                    'Profile Edit Phone Number Input'.Text,
                                    Match.Digit
                                ),
                                FullMatch
                            ),
                            // builds a table with phone number format at every position
                            varPhoneNumberFormat: With(
                                {varTextPhoneNumberFormat: 'Profile Edit Phone Number Input Format'.Text},
                                With(
                                    {
                                        varTablePhoneNumberFormat: ForAll(
                                            Sequence(Len(varTextPhoneNumberFormat)),
                                            With(
                                                {
                                                    varNumberCurrentLength: Left(
                                                        varTextPhoneNumberFormat,
                                                        Value
                                                    )
                                                },
                                                {
                                                    NumberFormat: varNumberCurrentLength,
                                                    CountNumbers: CountRows(
                                                        MatchAll(
                                                            varNumberCurrentLength,
                                                            "#"
                                                        )
                                                    )
                                                }
                                            )
                                        )
                                    },
                                    ForAll(
                                        Sequence(
                                            Max(
                                                varTablePhoneNumberFormat,
                                                CountNumbers
                                            )
                                        ),
                                        LookUp(
                                            varTablePhoneNumberFormat,
                                            CountNumbers = Value
                                        )
                                    )
                                )
                            )
                        },
                        Text(
                            Value(varTextNumbersOnly),
                            LookUp(
                                varPhoneNumberFormat,
                                CountNumbers = Len(varTextNumbersOnly),
                                NumberFormat
                            )
                        )
                    )
                );
                Reset('Profile Edit Phone Number Input');
            Visible: =false
            Width: =560
            X: =40
            Y: =290
            ZIndex: =2

        "'Profile Edit Full Name Label' As label":
            Font: =Font.'Lato Black'
            FontWeight: =FontWeight.Semibold
            Height: =Parent.Width * 0.075
            Size: =Parent.Width * 0.035
            Text: |-
                ="Full Name
                "
            Width: =560
            X: =Parent.Width * 0.05
            Y: =100
            ZIndex: =3

        "'Profile Edit Full Name Input' As text":
            Default: =User().FullName
            DisplayMode: =DisplayMode.Disabled
            Font: =Font.Lato
            Height: =Parent.Height* 0.05
            Size: =21
            Width: =Parent.Width * 0.8
            X: =Parent.Width * 0.05
            Y: ='Profile Edit Full Name Label'.Y + 'Profile Edit Full Name Label'.Height
            ZIndex: =4

        "'Profile Edit Phone Number Label' As label":
            Font: =Font.'Lato Black'
            FontWeight: =FontWeight.Semibold
            Height: =Parent.Width * 0.075
            Size: =Parent.Width * 0.035
            Text: |-
                ="Phone Number
                "
            Width: =560
            X: =Parent.Width * 0.05
            Y: ='Profile Edit Full Name Input'.Y + 'Profile Edit Full Name Input'.Height
            ZIndex: =5

        "'Profile Edit Profile Picture Label' As label":
            Font: =Font.'Lato Black'
            FontWeight: =FontWeight.Semibold
            Height: =Parent.Width * 0.075
            Size: =Parent.Width * 0.035
            Text: |-
                ="Profile Picture
                "
            Width: =560
            X: =Parent.Width * 0.05
            Y: ='Profile Edit Phone Number Input'.Y + 'Profile Edit Phone Number Input'.Height
            ZIndex: =6

        AddMediaWithImage2 As group:
            Height: =5
            Width: =5
            X: =60
            Y: =60
            ZIndex: =7

            "'Profile Edit Profile Picture Input' As image":
                BorderThickness: =1
                Height: =App.Width * 0.4
                Image: =If(IsBlank(AddMediaButton2.Media), LookUp(Users, 'Email Address' = User().Email, 'Profile Picture').Medium, AddMediaButton2.Media)
                ImagePosition: =ImagePosition.Fill
                Width: =App.Width * 0.4
                X: =Parent.Width * 0.05
                Y: ='Profile Edit Profile Picture Label'.Y + 'Profile Edit Profile Picture Label'.Height
                ZIndex: =7

            AddMediaButton2 As addMedia:
                BorderThickness: =1
                ChangePictureText: =
                Height: =App.Width * 0.4
                Size: =25
                Text: =""
                Width: =App.Width * 0.4
                X: =Parent.Width * 0.05
                Y: ='Profile Edit Profile Picture Label'.Y + 'Profile Edit Profile Picture Label'.Height
                ZIndex: =8

        "'Profile Edit Picture Change Icon' As icon.Camera":
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(0, 0, 0, 1)
            Height: =35
            Icon: =Icon.Camera
            Width: =35
            X: =App.Width * 0.4 + App.Width * 0.05
            Y: ='Profile Edit Profile Picture Label'.Y + 'Profile Edit Profile Picture Label'.Height
            ZIndex: =9

        "'Profile Edit About Me Label' As label":
            Font: =Font.'Lato Black'
            FontWeight: =FontWeight.Semibold
            Height: =Parent.Width * 0.075
            Size: =Parent.Width * 0.035
            Text: |-
                ="About Me
                "
            Width: =560
            X: =Parent.Width * 0.05
            Y: ='AddMediaButton2'.Y + 'AddMediaButton2'.Height
            ZIndex: =10

        "'Profile Edit About Me Input' As text":
            Default: =LookUp(Users, 'Email Address' = User().Email, 'About Me')
            Font: =Font.Lato
            Height: =App.Height - 'Profile Edit About Me Input'.Y - 10
            Mode: =TextMode.MultiLine
            Size: =App.Width * 0.03
            Width: =Parent.Width * 0.9
            X: =Parent.Width * 0.05
            Y: ='Profile Edit About Me Label'.Y + 'Profile Edit About Me Label'.Height
            ZIndex: =11

        "'Profile Edit Phone Number Input' As text":
            Default: |-
                =//LookUp(Users, 'Email Address' = User().Email, 'Phone Number')
                varPhoneNumber
            Font: =Font.Lato
            Height: =Parent.Height* 0.05
            MaxLength: =Len('Profile Edit Phone Number Input Format'.Text)
            Size: =21
            Width: =Parent.Width * 0.8
            X: =Parent.Width * 0.05
            Y: ='Profile Edit Phone Number Label'.Y + 'Profile Edit Phone Number Label'.Height
            ZIndex: =12

